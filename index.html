<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ch√∫c m·ª´ng t√¨nh y√™u</title>
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: black;
      }
      canvas {
        display: block;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas"></canvas>

    <script>
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");

      let W = window.innerWidth;
      let H = window.innerHeight;
      canvas.width = W;
      canvas.height = H;

      window.addEventListener("resize", () => {
        W = canvas.width = window.innerWidth;
        H = canvas.height = window.innerHeight;
      });

      // C√¢u ch√∫c s·∫Ω hi·ªán l√™n ng·∫´u nhi√™n
      const messages = [
        "Ch√∫c em c√≥ t·∫•t c·∫£ üíñ",
        "Happy Birthday",
        "01-08-2002",
        "Ch√∫c b√© lu√¥n xinh ƒë·∫πp",
        "Ch√∫c m·ª´ng sinh nh·∫≠t b√© iu",
      ];

      function randomMessage() {
        return messages[Math.floor(Math.random() * messages.length)];
      }

      // Danh s√°ch nhi·ªÅu ·∫£nh
      const imagePaths = [
        "1.jpg",
        "2.jpg",
        "3.jpg",
        "4.jpg",
        "/5.jpg",
        "/6.jpg",
        "/7.jpg",
      ]; // th√™m t√™n ·∫£nh t·∫°i ƒë√¢y
      const imageObjects = [];
      const loadedImages = [];

      function preloadImages(callback) {
        let loadedCount = 0;

        for (let i = 0; i < imagePaths.length; i++) {
          const img = new Image();
          img.src = imagePaths[i];
          img.onload = () => {
            loadedImages.push(img);
            loadedCount++;
            if (loadedCount === imagePaths.length) {
              callback();
            }
          };
        }
      }

      const particles = [];

      function spawnParticle() {
        const size = 18 + Math.random() * 20;
        particles.push({
          x: Math.random() * W,
          y: H + size,
          text: randomMessage(),
          size: size,
          speed: 0.5 + Math.random() * 2,
          alpha: 1,
        });
      }

      function drawHeart(x, y, size, alpha) {
        ctx.save();
        ctx.globalAlpha = alpha;
        ctx.fillStyle = "red";
        ctx.beginPath();
        ctx.moveTo(x, y);
        ctx.bezierCurveTo(x, y - size / 2, x - size, y - size / 2, x - size, y);
        ctx.bezierCurveTo(
          x - size,
          y + size,
          x,
          y + size * 1.5,
          x,
          y + size * 2
        );
        ctx.bezierCurveTo(x, y + size * 1.5, x + size, y + size, x + size, y);
        ctx.bezierCurveTo(x + size, y - size / 2, x, y - size / 2, x, y);
        ctx.fill();
        ctx.restore();
      }

      function createFloatingImages() {
        for (let i = 0; i < 30; i++) {
          const img =
            loadedImages[Math.floor(Math.random() * loadedImages.length)];
          imageObjects.push({
            img: img,
            x: Math.random() * W,
            y: Math.random() * H,
            size: 50 + Math.random() * 40,
            speedY: 0.5 + Math.random(),
            alpha: 0.7 + Math.random() * 0.3,
          });
        }
      }

      function animate() {
        ctx.clearRect(0, 0, W, H);

        if (Math.random() < 0.1) spawnParticle();

        // Ch·ªØ bay
        for (let i = particles.length - 1; i >= 0; i--) {
          const p = particles[i];
          ctx.globalAlpha = p.alpha;
          ctx.font = `${p.size}px sans-serif`;
          ctx.fillStyle = "#ffb3ff";
          ctx.fillText(p.text, p.x, p.y);
          drawHeart(p.x + Math.random() * 30 - 15, p.y - 20, 6, 0.5);

          p.y -= p.speed;
          p.alpha -= 0.003;
          if (p.alpha <= 0) particles.splice(i, 1);
        }

        // ·∫¢nh bay l√™n
        for (let i = 0; i < imageObjects.length; i++) {
          const imgObj = imageObjects[i];
          ctx.globalAlpha = imgObj.alpha;
          ctx.drawImage(
            imgObj.img,
            imgObj.x,
            imgObj.y,
            imgObj.size,
            imgObj.size
          );
          imgObj.y -= imgObj.speedY;
          if (imgObj.y + imgObj.size < 0) {
            imgObj.y = H + Math.random() * 100;
            imgObj.x = Math.random() * W;
          }
        }

        requestAnimationFrame(animate);
      }

      // Ch·∫°y khi ·∫£nh load xong
      preloadImages(() => {
        createFloatingImages();
        animate();
      });
    </script>
  </body>
</html>
